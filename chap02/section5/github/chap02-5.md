

# chap 02-5 프래그먼트 이해하기

2021.02.27



### 05-1 프래그먼트란?

* 프래그먼트

  * 하나의 화면을 여러 부분으로 나눠서 보여주거나 각각의 부분 화면 단위로 바꿔서 보여주고 싶을 때 사용함
  * 태블릿처럼 큰 화면의 단말을 지원하려고 시작했는데 지금은 단말의 크기와 상관없이 화면 UI를 만들 때 많이 사용됨
  * 하나의 화면 안에 들어가는 부분 화면과 같아서 하나의 레이아웃처럼 보이지만 액티비티처럼 독립적으로 동작하는 부분 화면을 만들 때 사용됨 

* 프래그먼트 사용 목적 : 분할된 화면들을 독립적으로 구성하고 상태를 관리하기 위해 사용함

* 프래그먼트를 화면에 추가하는 방법 이해하기

  * 프래그먼트 클래스 (Flagment) 주요 메서드

    ```java
    public final Activity getActivity()					// 이 프래그먼트를 포함하는 액티비티를 반홤함
    public final FragmentManager getFragmentManager()	// 액티비티에서 프래그먼트 객체들과 의사소통하는 프래그먼트 매니저를 반환함
    public final Fragment getParentFragment()			// 이 프래그먼트를 포함하는 부모가 프래그먼트일 경우 리턴함 (액티비티는 null)
    public final int getId()							// 이 프래그먼트의 ID를 반환함
    ```

  * 프래그먼트 매니저 : 레이아웃 파일이 아닌 코드에 프래그먼트를 추가하고 싶다면 프래그먼트 관리를 담당하는 프래그먼트 매니저를 사용해야함

  * 프래그먼트 매니저 (FragmentManager) 주요 메서드

    ```java
    public abtract FragementTransaction beginTransaction()		// 프래그먼트를 변경하기 위한 트랜잭션을 시작함
    public abtract Fragement findFragmentById(int id)			// ID를 이용해 프래그먼트 객체를 찾음
    public abtract Fragement findFragmentByTag(String tag)		// 태그 정보를 사용해 프래그먼트 객체를 찾음
    public abtract boolean executePendingTransactions()
    // 트랜잭션은 commit() 메서드를 호출하면 실행되지만 비동기(asynchronous) 방식으로 실행되므로 즉시 실행하고 싶다면 메서드를 추가로 호출해야 함
    ```

  * 프래그먼트의 특성

    |     특성      |                             설명                             |
    | :-----------: | :----------------------------------------------------------: |
    |    뷰 특성    | 뷰그룹에 추가되거나 레이아웃의 일부가 될 수 있음 (뷰에서 상속받은 것은 아니며 뷰를 담고 있는 일종의 틀임) |
    | 액티비티 특성 | 액티비티처럼 수명주기 (Lifecycle) 가지고 있음 (컨텍스트 객체는 아니며 라이프사이클은 액티비티에 종속됨) |

* 프래그먼트를 만들어 사용하는 과정

  1. 프래그먼트를 위한 XML 레이아웃 만들기
  2. 프래그먼트 클래스 만들기
  3. 액티비티를 XML 레이아웃에 추가하기

* 화면에 뷰를 추가하는 방법

  1. XML 레이아웃에 추가하는 방법
  2. 자바 소스 코드로 추가하는 방법

* 메인 액티비티에서 프래그먼트를 다루기 위해서 매니저 객체를 참조하는 메서드

  ```java
  public FragmentManager getFragmentManager()
  ```

* 프래그먼트로 화면 만들기 (SampleFragment)

  ![chap02-5/image01]()

* 프래그먼트가 화면에 보이기 전까지 호출될 수 있는 수명주기 메서드

  |                     메서드                     |                             설명                             |
  | :--------------------------------------------: | :----------------------------------------------------------: |
  |               onAttach(Activity)               |           프래그먼트가 액티비티와 연결될 때 호출됨           |
  |                onCreate(Bundle)                | 프래그먼트가 초기화될 때 호출됨 (새로운 프래그먼트 객체를 만드는 시점 X) |
  | onCreateView(LayoutInflator,ViewGroup, Bundle) |       프래그먼트와 관련되는 뷰 계층을 만들어서 리턴함        |
  |           onActivityCreated(Bundle)            | 프래그먼트와 연결된 액티비티가 onCreate() 메서드의 작업을 완료했을 때 호출됨 |
  |                   onStart()                    | 프래그먼트와 연결된 액티비티가 onStart() 되어 사용자에게 프래그먼트가 보일 때 호출됨 |
  |                   onResume()                   | 프래그먼트와 연결된 액티비티가 onResume() 되어 사용자와 상호작용할 수 있을 때 호출됨 |

* 프래그먼트가 화면에 보이지 않게 되면서 호출되는 상태 메서드

  |     메서드      |                             설명                             |
  | :-------------: | :----------------------------------------------------------: |
  |    onPause()    | 프래그먼트와 연결된 액티비티가 onPause() 되어 사용자와 상호작용을 중지할 때 호출됨 |
  |    onStop()     | 프래그먼트와 연결된 액티비티가 onStop() 되어 화면에서 더 이상 보이지 않을 때나 프래그먼트의 기능이 중지되었을 때 호출됨 |
  | onDestroyView() |   프래그먼트와 관련된 뷰 리소스를 해체할 수 있도록 호출됨    |
  |   onDestroy()   |    프래그먼트의 상태를 마지막으로 정리할 수 있도록 호출됨    |
  |   onDetach()    |     프래그먼트가 액티비티와 연결을 끊기 바로 전에 호출됨     |

* 프래그먼트 객체가 new 연산자로 만들어져도 액티비티 위에 올라가기 전까지는 프래그먼트로 동작하지 않음

  ```java
  MyFragement fragment = new MyFragment();								// 프래그먼트 객체는 만들어졌지만 프래그먼트로 동작하지는 않음
  getSupportFragmentManager().beginTransaction().add(fragment).commit();	// 액티비티에 추가된 후 프래그먼트로 동작함
  ```



### 05-2 프래그먼트로 화면 만들기

* 프래그먼트로 화면 만들기

  ![chap02-5/image02]()

  

### 05-3 액션바 사용하기

### 05-4 상단 탭과 하단 탭 만들기

### 05-5 뷰페이저 만들기

